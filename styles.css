/* ========================
   أضف هذا في أي مكان في الـ STYLE
   ======================== */

/* (هام) إيقاف كل الرسوم المتحركة في الخلفية افتراضياً */
.ambient-background .ray,
.ambient-background .grid-lines,
.title-glow {
    animation-play-state: paused; /* إيقاف الحركة */
    opacity: 0; /* إخفاؤها */
    transition: opacity 0.5s ease;
}

/* (هام) تشغيل الرسوم المتحركة فقط عندما يكون القسم مرئياً */
#process.is-in-view .ambient-background .ray,
#process.is-in-view .ambient-background .grid-lines,
#process.is-in-view .title-glow {
    animation-play-state: running; /* تشغيل الحركة */
    opacity: 1; /* إظهارها */
}
/* إذا كانت الـ grid-lines لها opacity خاص بها، عدّلها هكذا: */
#process.is-in-view .ambient-background .grid-lines {
    opacity: 1; /* أو القيمة الأصلية للـ grid-lines */
}
#process.is-in-view .title-glow {
    opacity: 0.8; /* أو القيمة الأصلية للـ glow */
}

/* ========================
   تحسينات أداء إضافية (تسريع العتاد GPU)
   ======================== */

/* أخبر المتصفح أن هذه العناصر ستتغير */
.methodology-step,
.step-visual,
.step-text {
    /* سيتم تحريكها، جهّز كرت الشاشة */
    will-change: transform, opacity;
}

.step-number {
    /* سيتم تدويرها، جهّز كرت الشاشة */
    will-change: transform;
}

.visual-container::before {
    /* سيتم تحريكها، جهّز كرت الشاشة */
    will-change: left;
}

/* (هام جداً)
   اجعل الخلفية الثابتة #particleCanvas تتوقف عن العمل 
   عندما لا نكون في قسم "Methodology"
*/
#particleCanvas {
    /* ... إعداداتك الحالية ... */
    visibility: hidden; /* مخفية افتراضياً */
    opacity: 0;
    transition: opacity 0.5s ease, visibility 0.5s ease;
}

/* أظهرها فقط عندما يكون القسم مرئياً */
#process.is-in-view #particleCanvas {
    visibility: visible;
    opacity: 1;
}
